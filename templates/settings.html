{% extends 'base.html' %}{% block content %}
<h3>Configurações</h3>
<div class="row g-4">
  <div class="col-lg-6">
    <div class="card p-4">
      <h5>Dispositivos ($)</h5>
      <form method="post" action="{{ url_for('settings_devices_add') }}" class="row g-2">
        <div class="col-7"><input class="form-control" name="name" placeholder="Ex.: ONT, CTO" required></div>
        <div class="col-5"><div class="input-group"><span class="input-group-text">$</span><input class="form-control" name="value_usd" type="number" step="0.01" min="0" required></div></div>
        <div class="col-12"><button class="btn btn-primary w-100">Salvar</button></div>
      </form>
      <div class="table-responsive mt-3" style="max-height:40vh">
        <table class="table table-sm table-dark"><thead><tr><th>Tipo</th><th>Valor</th><th class="text-end">Ações</th></tr></thead>
          <tbody>{% for t in types %}
            <tr><td>{{ t.name }}</td><td>$ {{ '%.2f'|format(t.value_usd) }}</td>
            <td class="text-end"><a class="btn btn-sm btn-danger" href="{{ url_for('settings_devices_del', tid=t.id) }}">Excluir</a></td></tr>
          {% else %}<tr><td colspan="3" class="text-secondary">Nenhum dispositivo.</td></tr>{% endfor %}</tbody>
        </table>
      </div>
    </div>
  </div>
  <div class="col-lg-6">
    <div class="card p-4">
      <h5>Faixas de Fusões ($/fusão)</h5>
      <form method="post" action="{{ url_for('settings_tiers_add') }}" class="row g-2">
        <div class="col-3"><input class="form-control" name="min_splices" type="number" min="0" placeholder="Mín." required></div>
        <div class="col-3"><input class="form-control" name="max_splices" type="number" min="0" placeholder="Máx. (vazio=∞)"></div>
        <div class="col-6"><div class="input-group"><span class="input-group-text">$</span><input class="form-control" name="price_per_splice_usd" type="number" step="0.01" min="0" placeholder="Preço por fusão" required></div></div>
        <div class="col-12"><button class="btn btn-primary w-100">Adicionar faixa</button></div>
      </form>
      <div class="table-responsive mt-3" style="max-height:40vh">
        <table class="table table-sm table-dark"><thead><tr><th>Faixa</th><th>$ / fusão</th><th class="text-end">Ações</th></tr></thead>
          <tbody>{% for s in tiers %}
            <tr><td>{{ s.min_splices }} – {{ s.max_splices if s.max_splices is not none else "∞" }}</td><td>$ {{ '%.2f'|format(s.price_per_splice_usd) }}</td>
            <td class="text-end"><a class="btn btn-sm btn-danger" href="{{ url_for('settings_tiers_del', tid=s.id) }}">Excluir</a></td></tr>
          {% else %}<tr><td colspan="3" class="text-secondary">Nenhuma faixa.</td></tr>{% endfor %}</tbody>
        </table>
      </div>
    </div>
  </div>
</div>
{% endblock %}